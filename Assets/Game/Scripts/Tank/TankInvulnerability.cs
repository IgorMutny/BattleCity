using UnityEngine;

public class TankInvulnerability
{
    private GameObject _invulnerabilitySample;
    private Transform _transform;
    private GameObject _invulnerability;
    private bool _isInvulnerable = false;
    private float _invulnerabilityTimeCurrent;

    public TankInvulnerability(Transform transform)
    {
        _invulnerabilitySample = Resources.Load<GameObject>("Invulnerability");
        _transform = transform;
    }

    public void FixedUpdate()
    {
        if (_isInvulnerable == true)
        {
            _invulnerabilityTimeCurrent -= Time.fixedDeltaTime;
            if (_invulnerabilityTimeCurrent <= 0)
            {
                _isInvulnerable = false;
                GameObject.Destroy(_invulnerability);
            }
        }
    }

    public void SetInvulnerability(float time)
    {
        _isInvulnerable = true;
        _invulnerabilityTimeCurrent = time;
        _invulnerability = GameObject.Instantiate(
            _invulnerabilitySample, _transform.position, Quaternion.identity, _transform);
    }

    public bool IsInvulnerable()
    {
        return _isInvulnerable;
    }
}
